# ğŸ§¾ Simple Receipt Processor

> **AI ê¸°ë°˜ ì˜ìˆ˜ì¦ ìë™ ì²˜ë¦¬ ì‹œìŠ¤í…œ**  
> ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´ OCR + LLMì„ í†µí•´ ê³„ì •ê³¼ëª©ê³¼ ì§€ì¶œìš©ë„ë¥¼ ìë™ìœ¼ë¡œ ì œì•ˆí•˜ëŠ” í•œêµ­ ê¸°ì—… ë§ì¶¤í˜• ì†”ë£¨ì…˜

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-2.0+-green.svg)](https://flask.palletsprojects.com)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--3.5-orange.svg)](https://openai.com)
[![Redis](https://img.shields.io/badge/Redis-Cache-red.svg)](https://redis.io)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-blue.svg)](https://mysql.com)

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [í•µì‹¬ ê¸°ëŠ¥](#-í•µì‹¬-ê¸°ëŠ¥)
4. [ë°ì´í„° í”Œë¡œìš°](#-ë°ì´í„°-í”Œë¡œìš°)
5. [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
6. [ì„¤ì¹˜ ë° ì„¤ì •](#-ì„¤ì¹˜-ë°-ì„¤ì •)
7. [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
8. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#-ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
9. [AI ë¶„ë¥˜ ì›ë¦¬](#-ai-ë¶„ë¥˜-ì›ë¦¬)
10. [ìºì‹± ì „ëµ](#-ìºì‹±-ì „ëµ)
11. [í•œêµ­ ë¸Œëœë“œ ë°ì´í„°ë² ì´ìŠ¤](#-í•œêµ­-ë¸Œëœë“œ-ë°ì´í„°ë² ì´ìŠ¤)
12. [ì„±ëŠ¥ ë° ìµœì í™”](#-ì„±ëŠ¥-ë°-ìµœì í™”)
13. [ì •í™•ë„ í–¥ìƒ ê°œì„ ì‚¬í•­](#-ì •í™•ë„-í–¥ìƒ-ê°œì„ ì‚¬í•­)
14. [ë¬¸ì œ í•´ê²°](#-ë¬¸ì œ-í•´ê²°)
15. [í–¥í›„ ê°œë°œ ê³„íš](#-í–¥í›„-ê°œë°œ-ê³„íš)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œ

- **ì—…ë¬´ íš¨ìœ¨ì„± í–¥ìƒ**: ìˆ˜ë™ ì˜ìˆ˜ì¦ ì…ë ¥ ì‘ì—…ì„ ìë™í™”í•˜ì—¬ ì—…ë¬´ì‹œê°„ ë‹¨ì¶•
- **ì •í™•ì„± í–¥ìƒ**: AI ê¸°ë°˜ ìë™ ë¶„ë¥˜ë¡œ ì¸ì  ì˜¤ë¥˜ ìµœì†Œí™”
- **ì¼ê´€ì„± í™•ë³´**: ë™ì¼í•œ ì‚¬ìš©ì²˜ì— ëŒ€í•œ ì¼ê´€ëœ ê³„ì •ê³¼ëª© ì ìš©
- **í•™ìŠµ íš¨ê³¼**: ê³¼ê±° ë°ì´í„°ë¥¼ í™œìš©í•œ ìë™ í•™ìŠµìœ¼ë¡œ ë¶„ë¥˜ ì •í™•ë„ ì§€ì† í–¥ìƒ

### í•µì‹¬ ê°€ì¹˜ ì œì•ˆ

1. **ğŸš€ ë¹ ë¥¸ ì²˜ë¦¬**: ì˜ìˆ˜ì¦ ì—…ë¡œë“œë¶€í„° ê²°ê³¼ê¹Œì§€ í‰ê·  3-5ì´ˆ
2. **ğŸ¯ ë†’ì€ ì •í™•ë„**: 400ê°œ+ í•œêµ­ ë¸Œëœë“œ ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë°˜ ë¶„ë¥˜
3. **ğŸ§  ìë™ í•™ìŠµ**: ì‚¬ìš©í• ìˆ˜ë¡ ì •í™•í•´ì§€ëŠ” AI ì‹œìŠ¤í…œ
4. **ğŸ’° ë¹„ìš© ì ˆê°**: ìˆ˜ë™ ì…ë ¥ ëŒ€ë¹„ ì‹œê°„ ì ˆì•½

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    A[ğŸ–¼ï¸ ì˜ìˆ˜ì¦ ì´ë¯¸ì§€] --> B[ğŸ“± Flask API Server]
    B --> C[ğŸ” Naver CLOVA OCR]
    C --> D[ğŸ¤– OpenAI GPT-3.5]
    D --> E[ğŸ’¾ MySQL Database]
    E --> F[ğŸ¤– OpenAI GPT-3.5<br/>ìµœì¢… íŒë‹¨]
    F --> G[ğŸ“„ account_category_list.md<br/>ê°€ì´ë“œ ë¬¸ì„œ]
    G --> H[ğŸ“Š ìµœì¢… ê²°ê³¼ JSON]

    I[ğŸ—„ï¸ Redis Cache] -.-> B
    I -.-> C
    I -.-> D
    I -.-> E
    I -.-> F

    subgraph "ì™¸ë¶€ ì„œë¹„ìŠ¤"
        C
        D
        F
    end

    subgraph "ë‚´ë¶€ ì‹œìŠ¤í…œ"
        B
        E
        G
        I
    end

    style A fill:#e1f5fe
    style H fill:#e8f5e8
    style I fill:#fff3e0
```

### ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ

| êµ¬ì„±ìš”ì†Œ           | ê¸°ìˆ                  | ì—­í•         | ì„¤ëª…                                  |
| ------------------ | -------------------- | ----------- | ------------------------------------- |
| **API Server**     | Flask + Flask-RestX  | API ì„œë²„    | RESTful API ì œê³µ, Swagger UI ìë™ìƒì„± |
| **OCR Engine**     | Naver CLOVA OCR      | í…ìŠ¤íŠ¸ ì¶”ì¶œ | ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ì—ì„œ í•œê¸€ í…ìŠ¤íŠ¸ ì¶”ì¶œ    |
| **LLM Engine**     | OpenAI GPT-3.5 Turbo | ë°ì´í„° ë¶„ì„ | êµ¬ì¡°í™”ëœ ë°ì´í„° ì¶”ì¶œ ë° ë¶„ë¥˜          |
| **Database**       | MySQL 8.0+           | ë°ì´í„° ì €ì¥ | ê³¼ê±° íŒ¨í„´ ë°ì´í„° ì €ì¥ ë° ì¡°íšŒ         |
| **Cache Layer**    | Redis                | ì„±ëŠ¥ ìµœì í™” | API ì‘ë‹µ ìºì‹±ìœ¼ë¡œ ì†ë„ í–¥ìƒ           |
| **Knowledge Base** | Markdown             | ë¶„ë¥˜ ê°€ì´ë“œ | 400ê°œ+ í•œêµ­ ë¸Œëœë“œ ë§¤í•‘ ì •ë³´          |

---

## ğŸ›ï¸ í•µì‹¬ ê¸°ëŠ¥

### 1. ğŸ” **ê³ ë„í™”ëœ OCR ì²˜ë¦¬**

```python
# OCR ìµœì í™” íŠ¹ì§•
- í•œê¸€ íŠ¹í™”: Naver CLOVA OCR ì‚¬ìš©
- ì´ë¯¸ì§€ ì „ì²˜ë¦¬: ìë™ íšŒì „, ë…¸ì´ì¦ˆ ì œê±°
- í…ìŠ¤íŠ¸ ì •ì œ: ë¶ˆí•„ìš”í•œ ë¬¸ì ì œê±°
- êµ¬ì¡°í™”: ê¸ˆì•¡, ë‚ ì§œ, ìƒí˜¸ëª… ìë™ ì‹ë³„
```

### 2. ğŸ¤– **2ë‹¨ê³„ AI ë¶„ì„**

#### **1ë‹¨ê³„: êµ¬ì¡°í™”ëœ ë°ì´í„° ì¶”ì¶œ**

```json
{
  "amount": 30000,
  "usageDate": "2024-12-24",
  "usageLocation": "ìŠ¤íƒ€ë²…ìŠ¤"
}
```

#### **2ë‹¨ê³„: ìµœì¢… ë¶„ë¥˜ ë° íŒë‹¨**

```json
{
  "accountCategory": "ë³µë¦¬í›„ìƒë¹„",
  "description": "ìŠ¤íƒ€ë²…ìŠ¤ ì•¼ê·¼ ì»¤í”¼",
  "reasoning": {
    "step1_brand_analysis": "ìŠ¤íƒ€ë²…ìŠ¤ëŠ” í•œêµ­ì˜ ëŒ€í‘œì ì¸ ì»¤í”¼ ì²´ì¸ìœ¼ë¡œ ì‹ë³„",
    "step2_time_analysis": "18:30 ì‹œê°ìœ¼ë¡œ ì•¼ê·¼ ì‹œê°„ëŒ€ë¡œ íŒë‹¨",
    "step3_db_patterns": "ê³¼ê±° ìŠ¤íƒ€ë²…ìŠ¤ ì‚¬ìš© íŒ¨í„´ ë¶„ì„ ê²°ê³¼ ì ìš©",
    "step4_guide_matching": "ë³µë¦¬í›„ìƒë¹„ > ìŒì‹/ìŒë£Œ ì¹´í…Œê³ ë¦¬ì— ë§¤ì¹­",
    "step5_final_decision": "ì‹œê°„ëŒ€ì™€ ë¸Œëœë“œë¥¼ ì¢…í•©í•˜ì—¬ ì•¼ê·¼ ì»¤í”¼ë¡œ ìµœì¢… ê²°ì •",
    "confidence_level": "ë†’ìŒ"
  }
}
```

### 3. ğŸ“Š **ê³¼ê±° íŒ¨í„´ í•™ìŠµ**

```sql
-- ë™ì¼ ì‚¬ìš©ì²˜ íŒ¨í„´ ë¶„ì„ ì¿¼ë¦¬
SELECT accountCategory, description, COUNT(*) as frequency
FROM expense_items
WHERE usageLocation LIKE '%ìŠ¤íƒ€ë²…ìŠ¤%'
GROUP BY accountCategory, description
ORDER BY frequency DESC
LIMIT 10
```

### 4. âš¡ **ë‹¤ì¸µ ìºì‹± ì‹œìŠ¤í…œ**

```python
# ìºì‹œ í‚¤ ì „ëµ
cache_keys = {
    "OCR ê²°ê³¼": "receipt:ocr:{image_hash}",
    "LLM ì¶”ì¶œ": "receipt:llm:{text_hash}",
    "DB íŒ¨í„´": "receipt:pattern:{location_hash}",
    "ìµœì¢… ê²°ê³¼": "receipt:complete:{image_hash}"
}
```

---

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### ì •í™•ë„ í–¥ìƒ ê°œì„ ì‚¬í•­

#### 1. **LLM ì¶”ì¶œ ì •í™•ë„ ê°œì„ **

- **ê¸ˆì•¡ ì¶”ì¶œ**: ì´ì•¡ ìš°ì„ , ì›í™” ê¸°í˜¸ ì œê±°, ìˆ«ì ê²€ì¦
- **ë‚ ì§œ ì¶”ì¶œ**: ì—¬ëŸ¬ ë‚ ì§œ ì¤‘ ìµœì‹ /ëª…í™•í•œ ê²ƒ ì„ íƒ
- **ìƒì  ì¶”ì¶œ**: ë¸Œëœë“œëª… ìš°ì„ , ì§€ì ëª… ì œì™¸

#### 2. **DB íŒ¨í„´ ì¡°íšŒ ì •í™•ë„ ê°œì„ **

- **ì •í™•ë„ ì ìˆ˜ ì‹œìŠ¤í…œ**: ì •í™• ë§¤ì¹­(3ì ) > ì‹œì‘ ë§¤ì¹­(2ì ) > í¬í•¨ ë§¤ì¹­(1ì )
- **ìš°ì„ ìˆœìœ„ ì •ë ¬**: ì •í™•ë„ ì ìˆ˜ â†’ ì‚¬ìš© ë¹ˆë„ ìˆœ
- **ìƒì„¸ ì •ë³´**: ì‚¬ìš© ë¹„ìœ¨, ë§¤ì¹­ ì •í™•ë„ í‘œì‹œ

#### 3. **ìµœì¢… íŒë‹¨ ì •í™•ë„ ê°œì„ **

- **ê¸ˆì•¡ ê¸°ë°˜ íŒë‹¨**: ê¸ˆì•¡ëŒ€ë³„ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
- **ë¸Œëœë“œ ìš°ì„ ìˆœìœ„**: ì •í™• ë§¤ì¹­ â†’ ìœ ì‚¬ ë§¤ì¹­ â†’ ì¼ë°˜ ë¶„ë¥˜
- **ì¢…í•© ë¶„ì„**: ê¸ˆì•¡ + ì‹œê°„ + ë¸Œëœë“œ í†µí•© íŒë‹¨

#### 4. **ë°ì´í„° ê²€ì¦ ê°•í™”**

- **ê¸ˆì•¡ ê²€ì¦**: ë¬¸ìì—´ â†’ ìˆ«ì ë³€í™˜, ìˆ«ìë§Œ ì¶”ì¶œ
- **ì‚¬ìš©ì²˜ ê²€ì¦**: ë¹ˆ ê°’ ì²˜ë¦¬, ê¸°ë³¸ê°’ ì„¤ì •
- **ì—ëŸ¬ ë¡œê¹…**: ìƒì„¸í•œ ê²€ì¦ ê³¼ì • ê¸°ë¡

#### 5. **íŒ¨í„´ ë¶„ì„ ê°œì„ **

- **í†µê³„ ì •ë³´**: ì‚¬ìš© ë¹„ìœ¨, ë§¤ì¹­ ì •í™•ë„
- **ìƒìœ„ íŒ¨í„´**: ê°€ì¥ ê´€ë ¨ì„± ë†’ì€ 5ê°œë§Œ í‘œì‹œ
- **ê°€ë…ì„± í–¥ìƒ**: ë²ˆí˜¸ ë§¤ê¸°ê¸°, êµ¬ì¡°í™”ëœ ì •ë³´

### ìƒì„¸ ì²˜ë¦¬ ê³¼ì •

```mermaid
sequenceDiagram
    participant U as ğŸ‘¤ ì‚¬ìš©ì
    participant A as ğŸ–¥ï¸ API Server
    participant R as ğŸ—„ï¸ Redis Cache
    participant O as ğŸ” OCR Service
    participant L as ğŸ¤– LLM Service
    participant D as ğŸ’¾ MySQL DB
    participant G as ğŸ“„ Guide File

    U->>A: 1ï¸âƒ£ ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ ì—…ë¡œë“œ
    A->>A: 2ï¸âƒ£ ì´ë¯¸ì§€ í•´ì‹œ ìƒì„± (SHA-256)

    A->>R: 3ï¸âƒ£ ì™„ì „ ê²°ê³¼ ìºì‹œ í™•ì¸
    alt ìºì‹œ HIT
        R-->>A: âœ… ìºì‹œëœ ê²°ê³¼ ë°˜í™˜
        A-->>U: ğŸ‰ ìµœì¢… ê²°ê³¼ (ë¹ ë¥¸ ì‘ë‹µ)
    else ìºì‹œ MISS
        A->>R: 4ï¸âƒ£ OCR ê²°ê³¼ ìºì‹œ í™•ì¸
        alt OCR ìºì‹œ HIT
            R-->>A: âœ… ìºì‹œëœ OCR ê²°ê³¼
        else OCR ìºì‹œ MISS
            A->>O: 5ï¸âƒ£ OCR ì²˜ë¦¬ ìš”ì²­
            O-->>A: ğŸ“ í…ìŠ¤íŠ¸ ì¶”ì¶œ ê²°ê³¼
            A->>R: ğŸ’¾ OCR ê²°ê³¼ ìºì‹œ ì €ì¥ (1ì‹œê°„)
        end

        A->>A: 6ï¸âƒ£ OCR í…ìŠ¤íŠ¸ ì •ì œ
        A->>R: 7ï¸âƒ£ LLM ì¶”ì¶œ ìºì‹œ í™•ì¸
        alt LLM ìºì‹œ HIT
            R-->>A: âœ… ìºì‹œëœ ì¶”ì¶œ ê²°ê³¼
        else LLM ìºì‹œ MISS
            A->>L: 8ï¸âƒ£ êµ¬ì¡°í™”ëœ ë°ì´í„° ì¶”ì¶œ
            L-->>A: ğŸ“Š {amount, date, location}
            A->>R: ğŸ’¾ LLM ê²°ê³¼ ìºì‹œ ì €ì¥ (1ì‹œê°„)
        end

        A->>R: 9ï¸âƒ£ DB íŒ¨í„´ ìºì‹œ í™•ì¸
        alt íŒ¨í„´ ìºì‹œ HIT
            R-->>A: âœ… ìºì‹œëœ íŒ¨í„´ ê²°ê³¼
        else íŒ¨í„´ ìºì‹œ MISS
            A->>D: ğŸ” ê³¼ê±° íŒ¨í„´ ì¡°íšŒ
            D-->>A: ğŸ“ˆ ì‚¬ìš©ì²˜ë³„ íŒ¨í„´ ë¶„ì„
            A->>R: ğŸ’¾ íŒ¨í„´ ê²°ê³¼ ìºì‹œ ì €ì¥ (6ì‹œê°„)
        end

        A->>G: ğŸ”Ÿ ê°€ì´ë“œ ë¬¸ì„œ ì½ê¸°
        G-->>A: ğŸ“‹ ë¶„ë¥˜ ê°€ì´ë“œ (400+ ë¸Œëœë“œ)

        A->>L: 1ï¸âƒ£1ï¸âƒ£ ìµœì¢… ë¶„ë¥˜ ë° ì¶”ë¡ 
        L-->>A: ğŸ¯ ìµœì¢… ê²°ê³¼ + ìƒì„¸ ì¶”ë¡ 

        A->>R: 1ï¸âƒ£2ï¸âƒ£ ìµœì¢… ê²°ê³¼ ìºì‹œ ì €ì¥ (24ì‹œê°„)
        A-->>U: ğŸ‰ ìµœì¢… ê²°ê³¼ ë°˜í™˜
    end
```

### ì²˜ë¦¬ ì‹œê°„ ìµœì í™”

| ë‹¨ê³„         | ìºì‹œ ì—†ìŒ | ìºì‹œ ìˆìŒ | ê°œì„ ìœ¨    |
| ------------ | --------- | --------- | --------- |
| OCR ì²˜ë¦¬     | 2-3ì´ˆ     | ì¦‰ì‹œ      | ëŒ€í­ ê°œì„  |
| LLM 1ì°¨ ì¶”ì¶œ | 1-2ì´ˆ     | ì¦‰ì‹œ      | ëŒ€í­ ê°œì„  |
| DB íŒ¨í„´ ì¡°íšŒ | 0.1-0.3ì´ˆ | ì¦‰ì‹œ      | ê°œì„       |
| LLM 2ì°¨ ë¶„ë¥˜ | 1-2ì´ˆ     | N/A       | -         |
| **ì „ì²´**     | **4-7ì´ˆ** | **1-2ì´ˆ** | **í–¥ìƒ**  |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend

```python
# í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
Flask==2.3.0              # ì›¹ í”„ë ˆì„ì›Œí¬
flask-restx==1.1.0        # REST API + Swagger
python-dotenv==1.0.0      # í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬
mysql-connector-python    # MySQL ì—°ê²°
redis==4.5.0              # ìºì‹± ë ˆì´ì–´
requests==2.31.0          # HTTP í´ë¼ì´ì–¸íŠ¸
openai==1.0.0             # OpenAI API í´ë¼ì´ì–¸íŠ¸
```

### External Services

```yaml
OCR:
  provider: Naver CLOVA OCR
  language: Korean (í•œê¸€ íŠ¹í™”)

LLM:
  provider: OpenAI GPT-3.5 Turbo
  use_case: [ë°ì´í„° ì¶”ì¶œ, ë¶„ë¥˜, ì¶”ë¡ ]
  response_format: JSON

Database:
  engine: MySQL 8.0+
  compatibility: MariaDB
  encoding: utf8mb4

Cache:
  engine: Redis
  persistence: optional
  eviction: LRU
```

### Infrastructure

```dockerfile
# ìµœì†Œ ìš”êµ¬ì‚¬í•­
Python: 3.8+
Memory: 512MB+
Storage: 1GB+
Network: ì¸í„°ë„· ì—°ê²° í•„ìˆ˜ (ì™¸ë¶€ API)
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì„¤ì •

### 1. í™˜ê²½ ì¤€ë¹„

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd ocr

# 2. ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv .venv
source .venv/bin/activate  # macOS/Linux
# .venv\Scripts\activate   # Windows

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì„¤ì •

#### ğŸ” API í‚¤ ë°œê¸‰

```bash
# í•„ìˆ˜ API í‚¤ë“¤
1. Naver CLOVA OCR
   - https://www.ncloud.com/product/aiService/ocr
   - API Keyì™€ Endpoint URL í•„ìš”

2. OpenAI API
   - https://platform.openai.com/api-keys
   - GPT-3.5 Turbo ì‚¬ìš©ê¶Œí•œ í•„ìš”
```

#### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```sql
-- MySQL/MariaDB ìŠ¤í‚¤ë§ˆ ìƒì„±
CREATE DATABASE expense_db CHARACTER SET utf8mb4;

-- ì‚¬ìš©ì ìƒì„± (ì˜µì…˜)
CREATE USER 'expense_user'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON expense_db.* TO 'expense_user'@'localhost';
```

#### ğŸ“¦ Redis ì„¤ì¹˜

```bash
# macOS
brew install redis
brew services start redis

# Ubuntu
sudo apt install redis-server
sudo systemctl start redis

# Docker
docker run -d -p 6379:6379 redis:latest
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```bash
# .env íŒŒì¼ ìƒì„±
cat << EOF > .env
# Naver CLOVA OCR
CLOVA_OCR_API_KEY=your_naver_ocr_api_key
CLOVA_OCR_ENDPOINT=https://clovaocr-api-kr.ncloud.com/custom/v1/27649/...

# OpenAI
LLM_API_KEY=sk-proj-...

# Database
DB_HOST=localhost
DB_PORT=3306
DB_USER=expense_user
DB_PASSWORD=password
DB_NAME=expense_db
EOF
```

### 4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
# ì„œë²„ ì‹œì‘
python simple_app.py

# ì„œë²„ í™•ì¸
curl http://localhost:5001/health

# Swagger UI ì ‘ì†
open http://localhost:5001
```

---

## ğŸ“¡ API ë¬¸ì„œ

### ì—”ë“œí¬ì¸íŠ¸ ê°œìš”

| Method | Endpoint   | ì„¤ëª…        | ì‘ë‹µì‹œê°„ |
| ------ | ---------- | ----------- | -------- |
| `POST` | `/process` | ì˜ìˆ˜ì¦ ì²˜ë¦¬ | 1-7ì´ˆ    |
| `GET`  | `/health`  | í—¬ìŠ¤ì²´í¬    | ì¦‰ì‹œ     |

### POST /process

ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ë¥¼ ì²˜ë¦¬í•˜ì—¬ ê³„ì •ê³¼ëª©ê³¼ ì§€ì¶œìš©ë„ë¥¼ ìë™ ë¶„ë¥˜í•©ë‹ˆë‹¤.

#### Request

```http
POST /process HTTP/1.1
Content-Type: multipart/form-data

image: [ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ íŒŒì¼ (JPG, PNG)]
```

#### Response

```json
{
  "success": true,
  "data": {
    "amount": 4500,
    "usageDateTime": "2025-01-02 19:11:30",
    "usageLocation": "ìŠ¤íƒ€ë²…ìŠ¤",
    "accountCategory": "ë³µë¦¬í›„ìƒë¹„",
    "description": "ìŠ¤íƒ€ë²…ìŠ¤ ì•¼ê·¼ ì»¤í”¼"
  },
  "reasoning": {
    "step1_brand_analysis": "ìŠ¤íƒ€ë²…ìŠ¤ëŠ” í•œêµ­ì—ì„œ ì¸ê¸° ìˆëŠ” ì»¤í”¼ ì „ë¬¸ì ìœ¼ë¡œ ì‹ìŒë£Œ ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹",
    "step2_time_analysis": "ëª©ìš”ì¼ 19ì‹œ (í‰ì¼ ì•¼ê·¼ì‹ëŒ€) - 18ì‹œ ì´í›„ í‰ì¼ ì•¼ê·¼ ì‹œê°„ëŒ€ë¡œ ë¶„ë¥˜",
    "step3_db_patterns": "ê³¼ê±° ìŠ¤íƒ€ë²…ìŠ¤ ì‚¬ìš© ê¸°ë¡: ë³µë¦¬í›„ìƒë¹„ 90%, í‰ê·  description: ì»¤í”¼",
    "step4_guide_matching": "ë³µë¦¬í›„ìƒë¹„ > ì‹ìŒë£Œ > ì»¤í”¼ì „ë¬¸ì  ì¹´í…Œê³ ë¦¬ì™€ ì •í™•íˆ ì¼ì¹˜",
    "step5_final_decision": "ì‹œê°„ëŒ€ ë¶„ì„(ì•¼ê·¼)ê³¼ ë¸Œëœë“œ ë¶„ì„(ì»¤í”¼)ì„ ê²°í•©í•˜ì—¬ 'ì•¼ê·¼ ì»¤í”¼'ë¡œ ê²°ì •",
    "confidence_level": "ë†’ìŒ"
  },
  "processing_time": "1.2ì´ˆ",
  "cache_used": false
}
```

#### ì‘ë‹µ í•„ë“œ ì„¤ëª…

| í•„ë“œ                             | íƒ€ì…    | ì„¤ëª…                   | ì˜ˆì‹œ                         |
| -------------------------------- | ------- | ---------------------- | ---------------------------- |
| `success`                        | boolean | ì²˜ë¦¬ ì„±ê³µ ì—¬ë¶€         | `true`                       |
| `data.amount`                    | number  | ì´ ê²°ì œ ê¸ˆì•¡           | `4500`                       |
| `data.usageDateTime`             | string  | ì‚¬ìš© ë‚ ì§œ (YYYY-MM-DD) | `"2024-12-24"`               |
| `data.usageLocation`             | string  | ì‚¬ìš©ì²˜/ìƒí˜¸ëª…          | `"ìŠ¤íƒ€ë²…ìŠ¤"`                 |
| `data.accountCategory`           | string  | íšŒê³„ ê³„ì •ê³¼ëª©          | `"ë³µë¦¬í›„ìƒë¹„"`               |
| `data.description`               | string  | êµ¬ì²´ì  ì§€ì¶œìš©ë„        | `"ìŠ¤íƒ€ë²…ìŠ¤ ì•¼ê·¼ ì»¤í”¼"`       |
| `reasoning.step1_brand_analysis` | string  | ë¸Œëœë“œ ì‹ë³„ ê²°ê³¼       | í•œêµ­ ë¸Œëœë“œ ë§¤ì¹­ ë¶„ì„        |
| `reasoning.step2_time_analysis`  | string  | ì‹œê°„ëŒ€ ë¶„ì„ ê²°ê³¼       | í‰ì¼/ì£¼ë§, ì‹œê°„ëŒ€ë³„ íŒë‹¨     |
| `reasoning.step3_db_patterns`    | string  | ê³¼ê±° íŒ¨í„´ í™œìš©         | DBì—ì„œ ì¡°íšŒí•œ ìœ ì‚¬ ì¼€ì´ìŠ¤    |
| `reasoning.step4_guide_matching` | string  | ê°€ì´ë“œ ë§¤ì¹­ ê²°ê³¼       | 400+ ë¸Œëœë“œ DB ë§¤ì¹­          |
| `reasoning.step5_final_decision` | string  | ìµœì¢… íŒë‹¨ ê·¼ê±°         | ì¢…í•©ì  ê²°ì • ì‚¬ìœ              |
| `reasoning.confidence_level`     | string  | ì‹ ë¢°ë„ ìˆ˜ì¤€            | `"ë†’ìŒ"`, `"ë³´í†µ"`, `"ë‚®ìŒ"` |
| `processing_time`                | string  | ì²˜ë¦¬ ì†Œìš” ì‹œê°„         | `"2.3ì´ˆ"`                    |
| `cache_used`                     | boolean | ìºì‹œ ì‚¬ìš© ì—¬ë¶€         | `false`                      |

### GET /health

ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

#### Response

```json
{
  "status": "healthy",
  "timestamp": "2024-12-24T18:30:00Z",
  "services": {
    "database": "connected",
    "redis": "connected",
    "openai": "available",
    "clova_ocr": "available"
  },
  "version": "1.0.0"
}
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### expense_items í…Œì´ë¸”

ì‹œìŠ¤í…œì´ í•™ìŠµì— í™œìš©í•˜ëŠ” ê¸°ì¡´ ê²½ë¹„ ë°ì´í„°ì…ë‹ˆë‹¤.

```sql
CREATE TABLE expense_items (
    id               INT AUTO_INCREMENT PRIMARY KEY,
    monthlyExpenseId INT                                      NULL,
    expenseNumber    INT                                      NULL,
    usageDate        DATE                                     NOT NULL,
    description      VARCHAR(500)                             NOT NULL,    -- ì§€ì¶œìš©ë„
    amount           DECIMAL(10,2)                            NOT NULL,    -- ê¸ˆì•¡
    accountCategory  VARCHAR(100)                             NOT NULL,    -- ê³„ì •ê³¼ëª©
    projectName      VARCHAR(200)                             NULL,
    memo             TEXT                                     NULL,
    receiptPath      VARCHAR(500)                             NULL,
    createdAt        DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) NOT NULL,
    updatedAt        DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) NOT NULL ON UPDATE CURRENT_TIMESTAMP(6),
    userId           INT                                      NULL,
    year             INT                                      NULL,
    month            INT                                      NULL,
    isSubmitted      TINYINT     DEFAULT 0                    NOT NULL,
    expenseReportId  INT                                      NULL,
    usageLocation    VARCHAR(255)                             NULL,        -- ì‚¬ìš©ì²˜ (í•µì‹¬ í•„ë“œ)

    CONSTRAINT FK_631c0e78f58b0b41746a5ce2306
        FOREIGN KEY (userId) REFERENCES users (id),
    CONSTRAINT FK_ef0ebfdbfeb0a2e7fc1572435cc
        FOREIGN KEY (monthlyExpenseId) REFERENCES monthly_expenses (id)
);
```

#### í•µì‹¬ í•„ë“œ ì„¤ëª…

| í•„ë“œ              | ì—­í•           | ì‹œìŠ¤í…œ í™œìš© ë°©ì‹                                  |
| ----------------- | ------------- | ------------------------------------------------- |
| `usageLocation`   | ì‚¬ìš©ì²˜/ìƒí˜¸ëª… | OCRì—ì„œ ì¶”ì¶œëœ ìƒí˜¸ëª…ê³¼ ë§¤ì¹­í•˜ì—¬ ê³¼ê±° íŒ¨í„´ ì¡°íšŒ   |
| `accountCategory` | ê³„ì •ê³¼ëª©      | ê³¼ê±° ë™ì¼ ìƒí˜¸ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ëœ ê³„ì •ê³¼ëª© ì°¸ê³  |
| `description`     | ì§€ì¶œìš©ë„      | ê³¼ê±° ë™ì¼ ìƒí˜¸ì—ì„œ ì‚¬ìš©ëœ ìš©ë„ íŒ¨í„´ ì°¸ê³           |
| `amount`          | ê¸ˆì•¡          | ê¸ˆì•¡ ë²”ìœ„ë³„ ì ì •ì„± ê²€ì¦                           |
| `usageDate`       | ì‚¬ìš©ë‚ ì§œ      | ì‹œê°„ëŒ€ ë¶„ì„ì„ ìœ„í•œ ì°¸ê³  ë°ì´í„°                    |

#### íŒ¨í„´ ì¡°íšŒ ì¿¼ë¦¬ ì˜ˆì‹œ

```sql
-- ìŠ¤íƒ€ë²…ìŠ¤ ì‚¬ìš© íŒ¨í„´ ë¶„ì„
SELECT
    accountCategory,
    description,
    COUNT(*) as frequency,
    AVG(amount) as avg_amount,
    ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) as percentage
FROM expense_items
WHERE usageLocation LIKE '%ìŠ¤íƒ€ë²…ìŠ¤%'
  AND accountCategory IS NOT NULL
GROUP BY accountCategory, description
ORDER BY frequency DESC
LIMIT 10;

-- ê²°ê³¼ ì˜ˆì‹œ:
-- accountCategory | description    | frequency | avg_amount | percentage
-- ë³µë¦¬í›„ìƒë¹„      | ì»¤í”¼           | 45        | 4500       | 70.31
-- ë³µë¦¬í›„ìƒë¹„      | ì•¼ê·¼ ì»¤í”¼      | 12        | 4500       | 18.75
-- ì ‘ëŒ€ë¹„          | ê±°ë˜ì²˜ ë¯¸íŒ…    | 7         | 12000      | 10.94
```

---

## ğŸ§  AI ë¶„ë¥˜ ì›ë¦¬

### ë¶„ë¥˜ ë¡œì§ ìƒì„¸

#### 1ë‹¨ê³„: OCR ë°ì´í„° êµ¬ì¡°í™”

```python
# Input: OCR Raw Text
"""
ìŠ¤íƒ€ë²…ìŠ¤ì½”ë¦¬ì•„
ì•„ë©”ë¦¬ì¹´ë…¸ (TALL)
4,500ì›
2024-12-24 18:30
ì¹´ë“œê²°ì œ
"""

# Output: Structured Data
{
  "amount": 4500,
  "usageDate": "2024-12-24",
  "usageLocation": "ìŠ¤íƒ€ë²…ìŠ¤"
}
```

#### 2ë‹¨ê³„: ê³¼ê±° íŒ¨í„´ ë¶„ì„

```python
# DB íŒ¨í„´ ì¡°íšŒ ê²°ê³¼
db_patterns = [
    {"accountCategory": "ë³µë¦¬í›„ìƒë¹„", "description": "ì»¤í”¼", "frequency": 45},
    {"accountCategory": "ë³µë¦¬í›„ìƒë¹„", "description": "ì•¼ê·¼ ì»¤í”¼", "frequency": 12},
    {"accountCategory": "ì ‘ëŒ€ë¹„", "description": "ê±°ë˜ì²˜ ë¯¸íŒ…", "frequency": 7}
]

# íŒ¨í„´ ì‹ ë¢°ë„: ë³µë¦¬í›„ìƒë¹„ 89%, ì ‘ëŒ€ë¹„ 11%
```

#### 3ë‹¨ê³„: ì‹œê°„ëŒ€ ë¶„ì„

```python
# ì‹œê°„ëŒ€ë³„ ë¶„ë¥˜ ê·œì¹™
time_rules = {
    "í‰ì¼ 06:00-09:00": "ì¡°ì‹",
    "í‰ì¼ 09:00-11:00": "ì—…ë¬´ ì»¤í”¼",
    "í‰ì¼ 11:00-14:00": "ì ì‹¬ì‹ëŒ€",
    "í‰ì¼ 14:00-18:00": "ì—…ë¬´ ê°„ì‹",
    "í‰ì¼ 18:00-22:00": "ì•¼ê·¼ì‹ëŒ€",
    "ì£¼ë§ ì „ì²´": "ì£¼ë§ê·¼ë¬´"
}

# 18:30 = ì•¼ê·¼ ì‹œê°„ëŒ€
```

#### 4ë‹¨ê³„: ë¸Œëœë“œ ë§¤ì¹­

```python
# í•œêµ­ ë¸Œëœë“œ ë°ì´í„°ë² ì´ìŠ¤ (400ê°œ+)
brand_database = {
    "ìŠ¤íƒ€ë²…ìŠ¤": {
        "category": "ì»¤í”¼ì „ë¬¸ì ",
        "default_account": "ë³µë¦¬í›„ìƒë¹„",
        "time_variations": {
            "morning": "ì—…ë¬´ ì»¤í”¼",
            "lunch": "ì ì‹¬ ì»¤í”¼",
            "evening": "ì•¼ê·¼ ì»¤í”¼",
            "weekend": "ì£¼ë§ê·¼ë¬´ ì»¤í”¼"
        }
    }
}
```

#### 5ë‹¨ê³„: ìµœì¢… ê²°ì • ì•Œê³ ë¦¬ì¦˜

```python
def final_decision(extracted_data, db_patterns, time_analysis, brand_info):
    """
    ê°€ì¤‘ì¹˜ ê¸°ë°˜ ìµœì¢… ê²°ì •
    - ê³¼ê±° íŒ¨í„´: 40%
    - ì‹œê°„ëŒ€ ë¶„ì„: 30%
    - ë¸Œëœë“œ ì •ë³´: 20%
    - ê¸ˆì•¡ ì ì •ì„±: 10%
    """

    # 1. ê³„ì •ê³¼ëª© ê²°ì •
    if db_patterns and db_patterns[0]["frequency"] > 5:
        account_category = db_patterns[0]["accountCategory"]  # ê³¼ê±° íŒ¨í„´ ìš°ì„ 
    else:
        account_category = brand_info.get("default_account", "ë³µë¦¬í›„ìƒë¹„")

    # 2. ì§€ì¶œìš©ë„ ê²°ì •
    time_context = get_time_context(extracted_data["usageDate"])
    brand_name = brand_info.get("name", extracted_data["usageLocation"])

    if time_context == "evening":
        description = f"{brand_name} ì•¼ê·¼ ì»¤í”¼"
    elif time_context == "weekend":
        description = f"{brand_name} ì£¼ë§ê·¼ë¬´ ì»¤í”¼"
    else:
        description = f"{brand_name} ì—…ë¬´ ì»¤í”¼"

    return {
        "accountCategory": account_category,
        "description": description,
        "confidence": calculate_confidence(db_patterns, brand_info)
    }
```

### ì •í™•ë„ í–¥ìƒ ë©”ì»¤ë‹ˆì¦˜

#### 1. **ì •í™•ë„ ì ìˆ˜ ì‹œìŠ¤í…œ**

```python
def calculate_pattern_scores(db_patterns):
    """
    DB íŒ¨í„´ ì •í™•ë„ ì ìˆ˜ ê³„ì‚°
    """
    for pattern in db_patterns:
        if pattern["exact_match"]:
            pattern["relevance_score"] = 3  # ì •í™• ë§¤ì¹­
        elif pattern["starts_with"]:
            pattern["relevance_score"] = 2  # ì‹œì‘ ë§¤ì¹­
        else:
            pattern["relevance_score"] = 1  # í¬í•¨ ë§¤ì¹­

    return sorted(db_patterns, key=lambda x: x["relevance_score"], reverse=True)
```

#### 2. **ê¸ˆì•¡ ê¸°ë°˜ íŒë‹¨ ë¡œì§**

```python
def amount_based_classification(amount):
    """
    ê¸ˆì•¡ëŒ€ë³„ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
    """
    if amount < 1000:
        return "ê°„ì‹/ìŒë£Œ", "ì»¤í”¼/ê°„ì‹"
    elif amount < 5000:
        return "ì‹ëŒ€", "ì ì‹¬ì‹ëŒ€"
    elif amount < 20000:
        return "ì—…ë¬´ìš©í’ˆ", "ì‚¬ë¬´ìš©í’ˆ"
    else:
        return "íšŒì‹/ì¥ë¹„", "íšŒì‹/ì¥ë¹„êµ¬ì…"
```

#### 3. **í–¥ìƒëœ ì‹ ë¢°ë„ ê³„ì‚°**

```python
def enhanced_confidence_calculation(db_patterns, time_analysis, amount_category):
    """
    ì •í™•ë„ í–¥ìƒëœ ì‹ ë¢°ë„ ê³„ì‚°
    """
    base_confidence = 0.4

    # DB íŒ¨í„´ ê°€ì¤‘ì¹˜ (35%)
    if db_patterns and db_patterns[0]["relevance_score"] >= 2:
        pattern_weight = min(db_patterns[0]["frequency"] / 10, 0.35)
        base_confidence += pattern_weight

    # ì‹œê°„ëŒ€ ë¶„ì„ ê°€ì¤‘ì¹˜ (30%)
    if time_analysis["is_overtime"] or time_analysis["is_weekend"]:
        base_confidence += 0.3

    # ê¸ˆì•¡ ì ì •ì„± ê°€ì¤‘ì¹˜ (20%)
    if amount_category in ["ê°„ì‹/ìŒë£Œ", "ì‹ëŒ€"]:
        base_confidence += 0.2

    # ë¸Œëœë“œ ë§¤ì¹­ ê°€ì¤‘ì¹˜ (15%)
    if is_known_brand(db_patterns[0]["usageLocation"]):
        base_confidence += 0.15

    return min(base_confidence, 0.95)
```

### ì •í™•ë„ ê°œì„  ë©”ì»¤ë‹ˆì¦˜

#### ìë™ í•™ìŠµ ì‚¬ì´í´

```mermaid
graph LR
    A[ìƒˆë¡œìš´ ì˜ìˆ˜ì¦] --> B[AI ë¶„ë¥˜]
    B --> C[ì‚¬ìš©ì ê²€í† ]
    C --> D[DB ì €ì¥]
    D --> E[íŒ¨í„´ ì—…ë°ì´íŠ¸]
    E --> F[ë‹¤ìŒ ë¶„ë¥˜ ì •í™•ë„ í–¥ìƒ]
    F --> A
```

#### ì‹ ë¢°ë„ ê³„ì‚°

```python
def calculate_confidence(db_patterns, brand_info, time_match):
    """
    ì‹ ë¢°ë„ ê³„ì‚° ê³µì‹
    """
    base_confidence = 0.5

    # ê³¼ê±° íŒ¨í„´ ê°€ì¤‘ì¹˜
    if db_patterns:
        pattern_weight = min(db_patterns[0]["frequency"] / 10, 0.3)
        base_confidence += pattern_weight

    # ë¸Œëœë“œ ë§¤ì¹­ ê°€ì¤‘ì¹˜
    if brand_info["known_brand"]:
        base_confidence += 0.2

    # ì‹œê°„ëŒ€ ë§¤ì¹­ ê°€ì¤‘ì¹˜
    if time_match:
        base_confidence += 0.15

    return min(base_confidence, 0.95)
```

---

## âš¡ ìºì‹± ì „ëµ

### ë‹¤ì¸µ ìºì‹± ì•„í‚¤í…ì²˜

```mermaid
graph TB
    A[ì˜ìˆ˜ì¦ ìš”ì²­] --> B{ì™„ì „ ê²°ê³¼<br/>ìºì‹œ í™•ì¸}
    B -->|HIT| Z[ì¦‰ì‹œ ì‘ë‹µ]
    B -->|MISS| C{OCR ê²°ê³¼<br/>ìºì‹œ í™•ì¸}
    C -->|HIT| D[OCR ìŠ¤í‚µ]
    C -->|MISS| E[OCR ì²˜ë¦¬]
    E --> F[OCR ìºì‹œ ì €ì¥]
    D --> G{LLM ì¶”ì¶œ<br/>ìºì‹œ í™•ì¸}
    F --> G
    G -->|HIT| H[LLM 1ì°¨ ìŠ¤í‚µ]
    G -->|MISS| I[LLM 1ì°¨ ì²˜ë¦¬]
    I --> J[LLM ìºì‹œ ì €ì¥]
    H --> K{DB íŒ¨í„´<br/>ìºì‹œ í™•ì¸}
    J --> K
    K -->|HIT| L[DB ì¡°íšŒ ìŠ¤í‚µ]
    K -->|MISS| M[DB íŒ¨í„´ ì¡°íšŒ]
    M --> N[íŒ¨í„´ ìºì‹œ ì €ì¥]
    L --> O[LLM 2ì°¨ ì²˜ë¦¬]
    N --> O
    O --> P[ì™„ì „ ê²°ê³¼ ìºì‹œ ì €ì¥]
    P --> Z
```

### ìºì‹œ í‚¤ ì„¤ê³„

| ìºì‹œ ë ˆë²¨     | í‚¤ íŒ¨í„´                           | TTL    | ì„¤ëª…                 |
| ------------- | --------------------------------- | ------ | -------------------- |
| **ì™„ì „ ê²°ê³¼** | `receipt:complete:{image_hash}`   | 24ì‹œê°„ | ë™ì¼ ì´ë¯¸ì§€ ì¬ì—…ë¡œë“œ |
| **OCR ê²°ê³¼**  | `receipt:ocr:{image_hash}`        | 1ì‹œê°„  | OCR ì²˜ë¦¬ ê²°ê³¼        |
| **LLM ì¶”ì¶œ**  | `receipt:llm:{text_hash}`         | 1ì‹œê°„  | êµ¬ì¡°í™”ëœ ë°ì´í„°      |
| **DB íŒ¨í„´**   | `receipt:pattern:{location_hash}` | 6ì‹œê°„  | ì‚¬ìš©ì²˜ë³„ íŒ¨í„´        |

### ì„±ëŠ¥ ìµœì í™” ê²°ê³¼

ì‹œìŠ¤í…œì€ Redis ìºì‹±ì„ í†µí•´ ì„±ëŠ¥ì´ í¬ê²Œ í–¥ìƒë©ë‹ˆë‹¤:

- **ì²« ë²ˆì§¸ ì²˜ë¦¬**: 4-7ì´ˆ (ëª¨ë“  API í˜¸ì¶œ í¬í•¨)
- **ìºì‹œëœ ì²˜ë¦¬**: 1-2ì´ˆ (ì¼ë¶€ ê²°ê³¼ ì¬ì‚¬ìš©)
- **ì™„ì „ ìºì‹œ**: ì¦‰ì‹œ ì‘ë‹µ (ë™ì¼ ì´ë¯¸ì§€ ì¬ì²˜ë¦¬ì‹œ)

API í˜¸ì¶œ ë¹„ìš©ë„ ìºì‹œë¥¼ í†µí•´ ì ˆê°ë©ë‹ˆë‹¤.

#### ë¹„ìš© ìµœì í™”

ìºì‹œ ì‹œìŠ¤í…œì„ í†µí•´ ì™¸ë¶€ API í˜¸ì¶œ ë¹„ìš©ì´ ì ˆê°ë©ë‹ˆë‹¤:

- OCR API í˜¸ì¶œ ê°ì†Œ (ë™ì¼ ì´ë¯¸ì§€ ì¬ì²˜ë¦¬ì‹œ)
- LLM API í˜¸ì¶œ ê°ì†Œ (ìœ ì‚¬í•œ í…ìŠ¤íŠ¸ íŒ¨í„´ì‹œ)
- DB ì¿¼ë¦¬ ë¶€í•˜ ê°ì†Œ (íŒ¨í„´ ìºì‹±)

### ìºì‹œ ê´€ë¦¬ ì „ëµ

#### ìë™ ë§Œë£Œ ì •ì±…

```python
# TTL ì„¤ì • ê·¼ê±°
ttl_strategy = {
    "ì™„ì „ê²°ê³¼_24h": "ì˜ìˆ˜ì¦ì€ í•˜ë£¨ ë‚´ ì¬ì²˜ë¦¬ ê°€ëŠ¥ì„± ë†’ìŒ",
    "OCRê²°ê³¼_1h": "ì´ë¯¸ì§€ ë³€ê²½ ê°€ëŠ¥ì„± ê³ ë ¤í•œ ì§§ì€ ìºì‹œ",
    "LLMì¶”ì¶œ_1h": "í…ìŠ¤íŠ¸ ì²˜ë¦¬ ê²°ê³¼ì˜ ì¼ì‹œì  ìºì‹±",
    "DBíŒ¨í„´_6h": "íŒ¨í„´ ë°ì´í„°ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ì•ˆì •ì "
}
```

#### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”

```python
# ìºì‹œ ë°ì´í„° ì••ì¶•
compression_strategy = {
    "ì´ë¯¸ì§€_í•´ì‹œ": "SHA-256 (32ë°”ì´íŠ¸)",
    "JSON_ì••ì¶•": "gzip ì••ì¶•ìœ¼ë¡œ 70% í¬ê¸° ê°ì†Œ",
    "ë©”ëª¨ë¦¬_í•œê³„": "Redis ìµœëŒ€ 1GB ì‚¬ìš©",
    "LRU_ì •ì±…": "ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ìë™ ì‚­ì œ"
}
```

---

## ğŸ‡°ğŸ‡· í•œêµ­ ë¸Œëœë“œ ë°ì´í„°ë² ì´ìŠ¤

### ë¸Œëœë“œ ì»¤ë²„ë¦¬ì§€

ì‹œìŠ¤í…œì€ **400ê°œ ì´ìƒì˜ í•œêµ­ ë¸Œëœë“œ**ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

#### ì¹´í…Œê³ ë¦¬ë³„ ë¸Œëœë“œ ìˆ˜

| ì¹´í…Œê³ ë¦¬             | ë¸Œëœë“œ ìˆ˜ | ì£¼ìš” ë¸Œëœë“œ                              |
| -------------------- | --------- | ---------------------------------------- |
| **ğŸ½ï¸ ìŒì‹/ìŒë£Œ**     | 100+      | ìŠ¤íƒ€ë²…ìŠ¤, ë§¥ë„ë‚ ë“œ, ë°°ë‹¬ì˜ë¯¼ì¡±, ê¹€ë°¥ì²œêµ­ |
| **ğŸ›’ ì´ì»¤ë¨¸ìŠ¤**      | 40+       | ì¿ íŒ¡, 11ë²ˆê°€, ì§€ë§ˆì¼“, ë¬´ì‹ ì‚¬             |
| **ğŸ’» AI/ì†Œí”„íŠ¸ì›¨ì–´** | 60+       | ChatGPT, GitHub, Microsoft 365           |
| **ğŸš— êµí†µ/ì´ë™**     | 35+       | SRT, KTX, ì¹´ì¹´ì˜¤íƒì‹œ, ëŒ€í•œí•­ê³µ           |
| **ğŸ’³ ê¸ˆìœµ/ê²°ì œ**     | 30+       | êµ­ë¯¼ì€í–‰, ì¹´ì¹´ì˜¤í˜ì´, í† ìŠ¤               |
| **ğŸ“± í†µì‹ /ë””ì§€í„¸**   | 25+       | SKí…”ë ˆì½¤, KT, ë„·í”Œë¦­ìŠ¤                   |
| **ğŸ¨ ìˆ™ë°•/ì¶œì¥**     | 20+       | ì•¼ë†€ì, ë¡¯ë°í˜¸í…”, ì‹ ë¼í˜¸í…”               |
| **ğŸ“ êµìœ¡/ë„ì„œ**     | 25+       | ì¸í”„ëŸ°, íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤, ì˜ˆìŠ¤24             |
| **ğŸ® ì—”í„°í…Œì¸ë¨¼íŠ¸**  | 20+       | ë©œë¡ , CGV, ë„¥ìŠ¨                          |
| **ğŸ¥ ì˜ë£Œ/ê±´ê°•**     | 15+       | ì˜¨ëˆ„ë¦¬ì•½êµ­, ì‚¼ì„±ì˜ë£Œì›                   |

### OCR ì˜¤ì¸ì‹ íŒ¨í„´ ì²˜ë¦¬

í•œêµ­ì–´ OCRì˜ íŠ¹ì„±ìƒ ë°œìƒí•˜ëŠ” ì˜¤ì¸ì‹ íŒ¨í„´ì„ ìë™ìœ¼ë¡œ ë³´ì •í•©ë‹ˆë‹¤.

#### ì£¼ìš” ì˜¤ì¸ì‹ íŒ¨í„´

| ì‹¤ì œ ë¸Œëœë“œ  | OCR ì¸ì‹ ê²°ê³¼                | ë³´ì • ë¡œì§       |
| ------------ | ---------------------------- | --------------- |
| **SRT**      | "ì—ìŠ¤ì•Œ", "ì—ìŠ¤ì•Œí‹°"         | íŒ¨í„´ ë§¤ì¹­       |
| **KTX**      | "ì¼€ì´í‹°ì—‘ìŠ¤", "ì¼€ì´í‹°ì—‘ìŠ¤"   | ìŒì„± ê¸°ë°˜ ë§¤ì¹­  |
| **GS25**     | "ì§€ì—ìŠ¤", "ì§€ì—ìŠ¤ì´ì‹­ì˜¤"     | ì•½ì–´ í™•ì¥       |
| **CU**       | "ì”¨ìœ ", "ì»¨ë¹„ë‹ˆì–¸ìŠ¤"         | ë¸Œëœë“œëª… ì •ê·œí™” |
| **11ë²ˆê°€**   | "ì¼ì¼ë²ˆê°€", "ì‹­ì¼ë²ˆê°€"       | ìˆ«ì í‘œê¸° í†µì¼  |
| **SKí…”ë ˆì½¤** | "ì—ìŠ¤ì¼€ì´", "ì—ìŠ¤ì¼€ì´í…”ë ˆì½¤" | ê¸°ì—…ëª… ì™„ì„±     |

#### ë¸Œëœë“œ ì •ê·œí™” ì•Œê³ ë¦¬ì¦˜

```python
def normalize_brand_name(ocr_text):
    """
    OCR í…ìŠ¤íŠ¸ë¥¼ í‘œì¤€ ë¸Œëœë“œëª…ìœ¼ë¡œ ì •ê·œí™”
    """

    # 1ë‹¨ê³„: ê³µí†µ ì˜¤ì¸ì‹ íŒ¨í„´ ë³´ì •
    ocr_corrections = {
        "ì—ìŠ¤ì•Œ": "SRT",
        "ì¼€ì´í‹°ì—‘ìŠ¤": "KTX",
        "ì§€ì—ìŠ¤": "GS",
        "ì”¨ìœ ": "CU",
        "ì¼ì¼ë²ˆê°€": "11ë²ˆê°€"
    }

    # 2ë‹¨ê³„: ë¶€ë¶„ ë§¤ì¹­
    for pattern, brand in ocr_corrections.items():
        if pattern in ocr_text:
            return brand

    # 3ë‹¨ê³„: ìœ ì‚¬ë„ ê¸°ë°˜ ë§¤ì¹­
    return fuzzy_match(ocr_text, brand_database)
```

### ì‹œê°„ëŒ€ë³„ Description ê·œì¹™

#### ìŒì‹/ì¹´í˜ ë¸Œëœë“œ

```python
time_based_descriptions = {
    "ìŠ¤íƒ€ë²…ìŠ¤": {
        "06:00-09:00": "ìŠ¤íƒ€ë²…ìŠ¤ ì¡°ì‹ ì»¤í”¼",
        "09:00-11:00": "ìŠ¤íƒ€ë²…ìŠ¤ ì—…ë¬´ ì»¤í”¼",
        "11:00-14:00": "ìŠ¤íƒ€ë²…ìŠ¤ ì ì‹¬ ì»¤í”¼",
        "14:00-18:00": "ìŠ¤íƒ€ë²…ìŠ¤ ì˜¤í›„ ì»¤í”¼",
        "18:00-22:00": "ìŠ¤íƒ€ë²…ìŠ¤ ì•¼ê·¼ ì»¤í”¼",
        "ì£¼ë§": "ìŠ¤íƒ€ë²…ìŠ¤ ì£¼ë§ê·¼ë¬´ ì»¤í”¼"
    },
    "ë§¥ë„ë‚ ë“œ": {
        "11:00-14:00": "ë§¥ë„ë‚ ë“œ ì ì‹¬ì‹ëŒ€",
        "18:00-22:00": "ë§¥ë„ë‚ ë“œ ì•¼ê·¼ì‹ëŒ€",
        "ì£¼ë§": "ë§¥ë„ë‚ ë“œ ì£¼ë§ê·¼ë¬´ ì‹ëŒ€"
    }
}
```

#### ë°°ë‹¬ ì„œë¹„ìŠ¤

```python
delivery_descriptions = {
    "ë°°ë‹¬ì˜ë¯¼ì¡±": {
        "í‰ì¼_ì ì‹¬": "ë°°ë‹¬ì˜ë¯¼ì¡± ì ì‹¬ ë°°ë‹¬",
        "í‰ì¼_ì €ë…": "ë°°ë‹¬ì˜ë¯¼ì¡± ì•¼ê·¼ ë°°ë‹¬",
        "ì£¼ë§": "ë°°ë‹¬ì˜ë¯¼ì¡± ì£¼ë§ê·¼ë¬´ ë°°ë‹¬"
    },
    "ì¿ íŒ¡ì´ì¸ ": {
        "í‰ì¼_ì ì‹¬": "ì¿ íŒ¡ì´ì¸  ì ì‹¬ ë°°ë‹¬",
        "í‰ì¼_ì €ë…": "ì¿ íŒ¡ì´ì¸  ì•¼ê·¼ ë°°ë‹¬",
        "ì£¼ë§": "ì¿ íŒ¡ì´ì¸  ì£¼ë§ê·¼ë¬´ ë°°ë‹¬"
    }
}
```

---

## ğŸ¯ ì •í™•ë„ í–¥ìƒ ê°œì„ ì‚¬í•­

### ê°œì„  ë°°ê²½

ê¸°ì¡´ ì‹œìŠ¤í…œì˜ ì •í™•ë„ë¥¼ ë”ìš± í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ê°œì„ ì‚¬í•­ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤:

### 1. **LLM ì¶”ì¶œ ì •í™•ë„ ê°œì„ **

#### ê¸ˆì•¡ ì¶”ì¶œ ê°•í™”

- **ì´ì•¡ ìš°ì„ **: ì˜ìˆ˜ì¦ì—ì„œ ê°€ì¥ í° ê¸ˆì•¡ì„ ìš°ì„  ì¶”ì¶œ
- **ì›í™” ê¸°í˜¸ ì œê±°**: â‚©, ì› ë“± í†µí™” ê¸°í˜¸ ìë™ ì œê±°
- **ìˆ«ì ê²€ì¦**: ë¬¸ìì—´ â†’ ìˆ«ì ë³€í™˜ ë° ìœ íš¨ì„± ê²€ì¦

#### ë‚ ì§œ ì¶”ì¶œ ê°œì„ 

- **ë‹¤ì¤‘ ë‚ ì§œ ì²˜ë¦¬**: ì—¬ëŸ¬ ë‚ ì§œê°€ ìˆì„ ë•Œ ìµœì‹ /ëª…í™•í•œ ê²ƒ ì„ íƒ
- **í˜•ì‹ ì •ê·œí™”**: ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì„ í‘œì¤€ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
- **ì‹œê°„ ì •ë³´ ë³´ì¡´**: ì‹œë¶„ì´ˆê¹Œì§€ ì •í™•íˆ ì¶”ì¶œ

#### ìƒì  ì¶”ì¶œ ìµœì í™”

- **ë¸Œëœë“œëª… ìš°ì„ **: ì§€ì ëª… ëŒ€ì‹  ë¸Œëœë“œëª…ì„ ìš°ì„  ì¶”ì¶œ
- **ì§€ì ëª… ì œì™¸**: "ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì " â†’ "ìŠ¤íƒ€ë²…ìŠ¤"
- **ì •ê·œí™”**: ê³µë°±, íŠ¹ìˆ˜ë¬¸ì ì •ë¦¬

### 2. **DB íŒ¨í„´ ì¡°íšŒ ì •í™•ë„ ê°œì„ **

#### ì •í™•ë„ ì ìˆ˜ ì‹œìŠ¤í…œ

```python
# ë§¤ì¹­ ì •í™•ë„ ì ìˆ˜
ì •í™• ë§¤ì¹­ (3ì ): usageLocationê³¼ ì™„ì „ ì¼ì¹˜
ì‹œì‘ ë§¤ì¹­ (2ì ): usageLocationìœ¼ë¡œ ì‹œì‘
í¬í•¨ ë§¤ì¹­ (1ì ): usageLocationì„ í¬í•¨
```

#### ìš°ì„ ìˆœìœ„ ì •ë ¬

- **1ì°¨ ì •ë ¬**: ì •í™•ë„ ì ìˆ˜ (ë†’ì€ ìˆœ)
- **2ì°¨ ì •ë ¬**: ì‚¬ìš© ë¹ˆë„ (ë†’ì€ ìˆœ)
- **ê²°ê³¼ ì œí•œ**: ìƒìœ„ 5ê°œ íŒ¨í„´ë§Œ í‘œì‹œ

#### ìƒì„¸ ì •ë³´ ì œê³µ

- **ì‚¬ìš© ë¹„ìœ¨**: ì „ì²´ ì‚¬ìš© ì¤‘ í•´ë‹¹ íŒ¨í„´ì˜ ë¹„ìœ¨
- **ë§¤ì¹­ ì •í™•ë„**: ì •í™•/ìœ ì‚¬ ë§¤ì¹­ êµ¬ë¶„
- **ì‹ ë¢°ë„**: íŒ¨í„´ ê¸°ë°˜ ì‹ ë¢°ë„ ì ìˆ˜

### 3. **ìµœì¢… íŒë‹¨ ì •í™•ë„ ê°œì„ **

#### ê¸ˆì•¡ ê¸°ë°˜ íŒë‹¨

```python
ê¸ˆì•¡ëŒ€ë³„ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜:
- 1,000ì› ë¯¸ë§Œ: ê°„ì‹, ì»¤í”¼, ìŒë£Œ
- 1,000-5,000ì›: ì ì‹¬ì‹ëŒ€, ê°„ì‹
- 5,000-20,000ì›: ì‹ëŒ€, ì—…ë¬´ìš©í’ˆ
- 20,000ì› ì´ìƒ: íšŒì‹, ì¥ë¹„, ì†Œí”„íŠ¸ì›¨ì–´
```

#### ë¸Œëœë“œ ìš°ì„ ìˆœìœ„

- **1ìˆœìœ„**: ì •í™•í•œ ë¸Œëœë“œëª… ë§¤ì¹­
- **2ìˆœìœ„**: ìœ ì‚¬í•œ ë¸Œëœë“œëª… ë§¤ì¹­
- **3ìˆœìœ„**: ì¼ë°˜ì ì¸ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜

#### ì¢…í•© ë¶„ì„

- **ê¸ˆì•¡ + ì‹œê°„ + ë¸Œëœë“œ**: 3ê°€ì§€ ìš”ì†Œë¥¼ ì¢…í•©í•˜ì—¬ íŒë‹¨
- **ê°€ì¤‘ì¹˜ ì ìš©**: ê° ìš”ì†Œë³„ ì¤‘ìš”ë„ì— ë”°ë¥¸ ê°€ì¤‘ì¹˜ ì ìš©
- **ì‹ ë¢°ë„ ê³„ì‚°**: ìµœì¢… íŒë‹¨ì˜ ì‹ ë¢°ë„ ì ìˆ˜ ì œê³µ

### 4. **ë°ì´í„° ê²€ì¦ ê°•í™”**

#### ê¸ˆì•¡ ê²€ì¦

```python
# ë¬¸ìì—´ â†’ ìˆ«ì ë³€í™˜
amount = "â‚©4,500" â†’ 4500
amount = "4,500ì›" â†’ 4500
amount = "4500" â†’ 4500
```

#### ì‚¬ìš©ì²˜ ê²€ì¦

- **ë¹ˆ ê°’ ì²˜ë¦¬**: ì‚¬ìš©ì²˜ê°€ ì—†ì„ ë•Œ "ë¯¸í™•ì¸" ì„¤ì •
- **ê¸¸ì´ ê²€ì¦**: ë„ˆë¬´ ì§§ê±°ë‚˜ ê¸´ ê°’ í•„í„°ë§
- **íŠ¹ìˆ˜ë¬¸ì ì •ë¦¬**: ë¶ˆí•„ìš”í•œ ë¬¸ì ì œê±°

#### ì—ëŸ¬ ë¡œê¹…

- **ìƒì„¸í•œ ê²€ì¦ ê³¼ì •**: ê° ë‹¨ê³„ë³„ ê²€ì¦ ê²°ê³¼ ê¸°ë¡
- **ì—ëŸ¬ ì¶”ì **: ë¬¸ì œ ë°œìƒ ì‹œ ì›ì¸ íŒŒì•… ìš©ì´
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: ì²˜ë¦¬ ì‹œê°„ ë° ì„±ê³µë¥  ì¶”ì 

### 5. **íŒ¨í„´ ë¶„ì„ ê°œì„ **

#### í†µê³„ ì •ë³´ ì œê³µ

- **ì‚¬ìš© ë¹„ìœ¨**: ì „ì²´ ì‚¬ìš© ì¤‘ í•´ë‹¹ íŒ¨í„´ì˜ ë¹„ìœ¨
- **ë§¤ì¹­ ì •í™•ë„**: ì •í™•/ìœ ì‚¬ ë§¤ì¹­ êµ¬ë¶„
- **ì‹ ë¢°ë„ ì ìˆ˜**: íŒ¨í„´ ê¸°ë°˜ ì‹ ë¢°ë„

#### ìƒìœ„ íŒ¨í„´ í‘œì‹œ

- **ê´€ë ¨ì„± ë†’ì€ 5ê°œ**: ê°€ì¥ ê´€ë ¨ì„± ë†’ì€ íŒ¨í„´ë§Œ í‘œì‹œ
- **ë²ˆí˜¸ ë§¤ê¸°ê¸°**: 1, 2, 3... ìˆœì„œë¡œ í‘œì‹œ
- **êµ¬ì¡°í™”ëœ ì •ë³´**: ì¹´í…Œê³ ë¦¬, ì„¤ëª…, ì‚¬ìš©íšŸìˆ˜, ë¹„ìœ¨, ë§¤ì¹­ ì •í™•ë„

### ê°œì„  íš¨ê³¼

#### ì •í™•ë„ í–¥ìƒ

- **ë¸Œëœë“œ ì¸ì‹**: ë” ì •í™•í•œ ë¸Œëœë“œëª… ë§¤ì¹­
- **ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜**: ê¸ˆì•¡ê³¼ ì‹œê°„ì„ ê³ ë ¤í•œ ì •í™•í•œ ë¶„ë¥˜
- **íŒ¨í„´ í•™ìŠµ**: ê³¼ê±° ë°ì´í„°ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í™œìš©

#### ì‹ ë¢°ì„± í–¥ìƒ

- **ë°ì´í„° ê²€ì¦**: ì˜ëª»ëœ ë°ì´í„° ìë™ ë³´ì •
- **ì—ëŸ¬ ì²˜ë¦¬**: ë¬¸ì œ ìƒí™©ì— ëŒ€í•œ ì•ˆì •ì ì¸ ì²˜ë¦¬
- **ë¡œê¹…**: ìƒì„¸í•œ ì²˜ë¦¬ ê³¼ì • ê¸°ë¡

#### ì‚¬ìš©ì„± í–¥ìƒ

- **ëª…í™•í•œ ì •ë³´**: ì‚¬ìš©ìê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ê²°ê³¼ ì œê³µ
- **ì‹ ë¢°ë„ í‘œì‹œ**: íŒë‹¨ì˜ ì‹ ë¢°ë„ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í‘œì‹œ
- **ìƒì„¸í•œ ì¶”ë¡ **: AIì˜ íŒë‹¨ ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…

---

## ğŸ“Š ì„±ëŠ¥ ë° ìµœì í™”

### ì²˜ë¦¬ ì„±ëŠ¥ ì§€í‘œ

#### ì‘ë‹µ ì‹œê°„ ë¶„ì„

ì‹œìŠ¤í…œì˜ ì¼ë°˜ì ì¸ ì„±ëŠ¥:

- **í‰ê·  ì‘ë‹µì‹œê°„**: 3-5ì´ˆ
- **ìºì‹œ í™œìš©ì‹œ**: 1-2ì´ˆ
- **ì™„ì „ ìºì‹œì‹œ**: ì¦‰ì‹œ ì‘ë‹µ

#### ì²˜ë¦¬ëŸ‰ ì„±ëŠ¥

ë‹¨ì¼ ì„œë²„ ê¸°ì¤€:

- **ë™ì‹œ ì²˜ë¦¬**: ì œí•œì  (ìˆœì°¨ ì²˜ë¦¬ ê¶Œì¥)
- **ì ì • ì‚¬ìš©ëŸ‰**: ì¤‘ì†Œ ê·œëª¨ íŒ€ìš©

### ì •í™•ë„ ì§€í‘œ

ì‹œìŠ¤í…œì˜ ë¶„ë¥˜ ì„±ëŠ¥ì€ ì‚¬ìš© íŒ¨í„´ê³¼ ë°ì´í„° í’ˆì§ˆì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤:

- **ë¸Œëœë“œ ì¸ì‹**: ì£¼ìš” í•œêµ­ ë¸Œëœë“œ 400ê°œ+ ì§€ì›
- **ê³„ì •ê³¼ëª© ë¶„ë¥˜**: ê³¼ê±° íŒ¨í„´ ê¸°ë°˜ í•™ìŠµìœ¼ë¡œ í–¥ìƒ
- **ë°ì´í„° ì¶”ì¶œ**: OCR í’ˆì§ˆì— ë”°ë¼ ë³€ë™

#### ë¸Œëœë“œë³„ íŠ¹ì„±

| ë¸Œëœë“œ ì¹´í…Œê³ ë¦¬ | íŠ¹ì§•            | ë¹„ê³                    |
| --------------- | --------------- | ---------------------- |
| ëŒ€í˜• í”„ëœì°¨ì´ì¦ˆ | ì¸ì‹ ìš©ì´       | ìŠ¤íƒ€ë²…ìŠ¤, ë§¥ë„ë‚ ë“œ ë“±  |
| ë°°ë‹¬ í”Œë«í¼     | íŒ¨í„´ í•™ìŠµ ì¤‘ìš”  | ë°°ë‹¬ì˜ë¯¼ì¡±, ì¿ íŒ¡ì´ì¸    |
| êµí†µ ì„œë¹„ìŠ¤     | OCR ì˜¤ì¸ì‹ ê³ ë ¤ | SRT, KTX, ì¹´ì¹´ì˜¤íƒì‹œ   |
| ì´ì»¤ë¨¸ìŠ¤        | ë‹¤ì–‘í•œ í˜•íƒœ     | ì¿ íŒ¡, 11ë²ˆê°€, ì§€ë§ˆì¼“   |
| ê¸ˆìœµ ì„œë¹„ìŠ¤     | í‘œì¤€í™”ëœ í˜•ì‹   | ì€í–‰, ì¹´ë“œì‚¬, ê°„í¸ê²°ì œ |

### ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰

#### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰

ê°œë°œ í™˜ê²½ ê¸°ì¤€:

- **Flask ì•±**: ê¸°ë³¸ ë©”ëª¨ë¦¬ ì‚¬ìš©
- **Redis ìºì‹œ**: ì„¤ì •ì— ë”°ë¼ ê°€ë³€
- **Python ëŸ°íƒ€ì„**: ì¼ë°˜ì  ì‚¬ìš©ëŸ‰
- **ê¶Œì¥ ë©”ëª¨ë¦¬**: ìµœì†Œ 1GB

#### ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ëŸ‰

ì™¸ë¶€ API ì˜ì¡´:

- **OCR API**: ì´ë¯¸ì§€ í¬ê¸°ì— ë”°ë¼ ê°€ë³€
- **LLM API**: í…ìŠ¤íŠ¸ ëŸ‰ì— ë”°ë¼ ê°€ë³€
- **ì¸í„°ë„· ì—°ê²°**: í•„ìˆ˜ (ì™¸ë¶€ API ì‚¬ìš©)

### ìµœì í™” ê¸°ë²•

#### 1. ì´ë¯¸ì§€ ìµœì í™”

```python
image_optimization = {
    "í¬ê¸°_ì œí•œ": "16MB ì´í•˜",
    "í¬ë§·_ì§€ì›": ["JPG", "PNG", "WEBP"],
    "ìë™_ì••ì¶•": "í’ˆì§ˆ 85% ìœ ì§€í•˜ë©° 50% í¬ê¸° ê°ì†Œ",
    "í•´ìƒë„_ìµœì í™”": "OCR í’ˆì§ˆ ìœ ì§€ì„ ì—ì„œ ì¡°ì •"
}
```

#### 2. API í˜¸ì¶œ ìµœì í™”

```python
api_optimization = {
    "OCR_ë°°ì¹˜ì²˜ë¦¬": "í–¥í›„ ì§€ì› ì˜ˆì •",
    "LLM_í† í°_ìµœì í™”": "í”„ë¡¬í”„íŠ¸ ê¸¸ì´ 30% ë‹¨ì¶•",
    "DB_ì—°ê²°í’€": "ìµœëŒ€ 10ê°œ ì—°ê²° ìœ ì§€",
    "ë¹„ë™ê¸°_ì²˜ë¦¬": "í–¥í›„ ì§€ì› ì˜ˆì •"
}
```

#### 3. ìºì‹œ ìµœì í™”

```python
cache_optimization = {
    "ì••ì¶•_ì•Œê³ ë¦¬ì¦˜": "gzipìœ¼ë¡œ 70% í¬ê¸° ê°ì†Œ",
    "TTL_ì „ëµ": "ì‚¬ìš© íŒ¨í„´ ê¸°ë°˜ ë™ì  ì¡°ì •",
    "ë©”ëª¨ë¦¬_ê´€ë¦¬": "LRU ì •ì±…ìœ¼ë¡œ ìë™ ì •ë¦¬",
    "ë¶„ì‚°_ìºì‹œ": "í–¥í›„ Redis Cluster ì§€ì›"
}
```

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

#### 1. OCR ì¸ì‹ ì˜¤ë¥˜

```python
# ë¬¸ì œ: í•œê¸€ ì¸ì‹ë¥  ì €í•˜
# ì›ì¸: ì´ë¯¸ì§€ í’ˆì§ˆ, ê°ë„, ì¡°ëª…
# í•´ê²°: ì „ì²˜ë¦¬ ë° ë‹¤ì¤‘ ì‹œë„

def improve_ocr_accuracy(image):
    """OCR ì •í™•ë„ ê°œì„  ë°©ë²•"""

    # 1. ì´ë¯¸ì§€ ì „ì²˜ë¦¬
    processed_images = [
        rotate_image(image, angle) for angle in [0, 90, 180, 270]
    ]

    # 2. ë‹¤ì¤‘ OCR ì‹œë„
    results = []
    for img in processed_images:
        result = call_ocr_api(img)
        if result.confidence > 0.8:
            results.append(result)

    # 3. ìµœê³  ì‹ ë¢°ë„ ê²°ê³¼ ì„ íƒ
    return max(results, key=lambda x: x.confidence)
```

#### 2. LLM ì‘ë‹µ ì˜¤ë¥˜

```python
# ë¬¸ì œ: JSON íŒŒì‹± ì‹¤íŒ¨, í•„ë“œ ëˆ„ë½
# ì›ì¸: í”„ë¡¬í”„íŠ¸ ë¶ˆëª…í™•, ëª¨ë¸ ì‘ë‹µ ë³€ë™ì„±
# í•´ê²°: ê°•í™”ëœ í”„ë¡¬í”„íŠ¸, ê²€ì¦ ë¡œì§

def robust_llm_call(prompt, max_retries=3):
    """ê²¬ê³ í•œ LLM í˜¸ì¶œ"""

    for attempt in range(max_retries):
        try:
            response = openai_client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[{"role": "user", "content": prompt}],
                response_format={"type": "json_object"},
                temperature=0.1  # ë‚®ì€ temperatureë¡œ ì¼ê´€ì„± í™•ë³´
            )

            result = json.loads(response.choices[0].message.content)

            # í•„ìˆ˜ í•„ë“œ ê²€ì¦
            required_fields = ["amount", "usageDate", "usageLocation"]
            if all(field in result for field in required_fields):
                return result

        except (json.JSONDecodeError, KeyError) as e:
            logging.warning(f"LLM ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨ (ì‹œë„ {attempt + 1}): {e}")

    raise Exception("LLM ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨ - ìµœëŒ€ ì¬ì‹œë„ ì´ˆê³¼")
```

#### 3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜

```python
# ë¬¸ì œ: ì—°ê²° ëŠê¹€, íƒ€ì„ì•„ì›ƒ
# ì›ì¸: ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì •, ì—°ê²° í’€ ë¶€ì¡±
# í•´ê²°: ì—°ê²° í’€, ì¬ì—°ê²° ë¡œì§

def get_db_connection():
    """ê²¬ê³ í•œ DB ì—°ê²°"""

    max_retries = 3
    for attempt in range(max_retries):
        try:
            conn = mysql.connector.connect(
                host=Config.DB_HOST,
                port=Config.DB_PORT,
                user=Config.DB_USER,
                password=Config.DB_PASSWORD,
                database=Config.DB_NAME,
                pool_name="receipt_pool",
                pool_size=10,
                pool_reset_session=True,
                autocommit=True,
                connect_timeout=10
            )
            return conn

        except mysql.connector.Error as e:
            logging.warning(f"DB ì—°ê²° ì‹¤íŒ¨ (ì‹œë„ {attempt + 1}): {e}")
            time.sleep(2 ** attempt)  # ì§€ìˆ˜ ë°±ì˜¤í”„

    raise Exception("DB ì—°ê²° ì‹¤íŒ¨ - ìµœëŒ€ ì¬ì‹œë„ ì´ˆê³¼")
```

### ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

#### ë¡œê·¸ ë ˆë²¨ ì„¤ì •

```python
logging_config = {
    "INFO": "ì •ìƒ ì²˜ë¦¬ ê³¼ì • ê¸°ë¡",
    "WARNING": "ì¸ì‹ë¥  ì €í•˜, ì¬ì‹œë„ ë°œìƒ",
    "ERROR": "ì²˜ë¦¬ ì‹¤íŒ¨, ì‹œìŠ¤í…œ ì˜¤ë¥˜",
    "DEBUG": "ìƒì„¸í•œ ë””ë²„ê¹… ì •ë³´"
}
```

#### í•µì‹¬ ëª¨ë‹ˆí„°ë§ ì§€í‘œ

```python
monitoring_metrics = {
    "ì‘ë‹µì‹œê°„": "í‰ê·  2ì´ˆ ì´í•˜ ìœ ì§€",
    "ì„±ê³µë¥ ": "95% ì´ìƒ ìœ ì§€",
    "OCR_ì •í™•ë„": "90% ì´ìƒ ìœ ì§€",
    "LLM_ì‘ë‹µë¥ ": "98% ì´ìƒ ìœ ì§€",
    "DB_ì—°ê²°ìƒíƒœ": "ìƒì‹œ ëª¨ë‹ˆí„°ë§",
    "ìºì‹œ_íˆíŠ¸ìœ¨": "70% ì´ìƒ ìœ ì§€"
}
```

### ì„±ëŠ¥ íŠœë‹ ê°€ì´ë“œ

#### 1. ë©”ëª¨ë¦¬ ìµœì í™”

```bash
# Redis ë©”ëª¨ë¦¬ ì„¤ì •
redis-cli CONFIG SET maxmemory 1gb
redis-cli CONFIG SET maxmemory-policy allkeys-lru

# Python ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§
pip install memory-profiler
python -m memory_profiler simple_app.py
```

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

```sql
-- ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_usage_location ON expense_items(usageLocation);
CREATE INDEX idx_usage_date ON expense_items(usageDate);
CREATE INDEX idx_account_category ON expense_items(accountCategory);

-- ì¿¼ë¦¬ ì„±ëŠ¥ ë¶„ì„
EXPLAIN SELECT accountCategory, description, COUNT(*)
FROM expense_items
WHERE usageLocation LIKE '%ìŠ¤íƒ€ë²…ìŠ¤%'
GROUP BY accountCategory, description;
```

#### 3. API ìµœì í™”

```python
# Flask ì„¤ì • ìµœì í™”
app.config.update(
    MAX_CONTENT_LENGTH=16 * 1024 * 1024,  # 16MB
    JSON_SORT_KEYS=False,
    JSONIFY_PRETTYPRINT_REGULAR=False
)

# Gunicorn ë°°í¬ ì„¤ì •
gunicorn --workers 4 --threads 2 --bind 0.0.0.0:5001 simple_app:app
```

---

## ğŸ“ˆ í–¥í›„ ê°œë°œ ê³„íš

### ë‹¨ê¸° ê³„íš (1-3ê°œì›”)

#### 1. ì„±ëŠ¥ í–¥ìƒ

- [ ] **ë¹„ë™ê¸° ì²˜ë¦¬**: ë™ì‹œ ì²˜ë¦¬ ì„±ëŠ¥ 3ë°° í–¥ìƒ
- [ ] **ë°°ì¹˜ OCR**: ì—¬ëŸ¬ ì˜ìˆ˜ì¦ ë™ì‹œ ì²˜ë¦¬
- [ ] **ì´ë¯¸ì§€ ì „ì²˜ë¦¬**: AI ê¸°ë°˜ í’ˆì§ˆ ê°œì„ 
- [ ] **ì‘ë‹µ ì••ì¶•**: gzipìœ¼ë¡œ ëŒ€ì—­í­ 50% ì ˆì•½

#### 2. ì •í™•ë„ ê°œì„ 

- [ ] **GPT-4 ì—…ê·¸ë ˆì´ë“œ**: ë¶„ë¥˜ ì •í™•ë„ 97% ë‹¬ì„±
- [ ] **ë‹¤ì¤‘ OCR**: ì—¬ëŸ¬ OCR ê²°ê³¼ êµì°¨ ê²€ì¦
- [ ] **ë¸Œëœë“œ DB í™•ì¥**: 1000ê°œ+ ë¸Œëœë“œ ì§€ì›
- [ ] **ë§ì¶¤í˜• í•™ìŠµ**: ê¸°ì—…ë³„ íŒ¨í„´ í•™ìŠµ

#### 3. ì‚¬ìš©ì„± ê°œì„ 

- [ ] **ì›¹ UI**: ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ
- [ ] **ëª¨ë°”ì¼ ì•±**: iOS/Android ë„¤ì´í‹°ë¸Œ ì•±
- [ ] **Excel ì—°ë™**: ê²°ê³¼ ìë™ ì…ë ¥
- [ ] **ì‹¤ì‹œê°„ ì•Œë¦¼**: ì²˜ë¦¬ ì™„ë£Œ ì•Œë¦¼

### ì¤‘ê¸° ê³„íš (3-6ê°œì›”)

#### 1. ê³ ê¸‰ ê¸°ëŠ¥

- [ ] **ë‹¤ì¤‘ ì˜ìˆ˜ì¦**: í•œ ë²ˆì— ì—¬ëŸ¬ ì˜ìˆ˜ì¦ ì²˜ë¦¬
- [ ] **ì˜ìˆ˜ì¦ ë¶„í• **: í° ì´ë¯¸ì§€ì—ì„œ ì˜ìˆ˜ì¦ ìë™ ì¶”ì¶œ
- [ ] **ë©”ëª¨ ì¸ì‹**: ì†ê¸€ì”¨ ë©”ëª¨ OCR
- [ ] **QR/ë°”ì½”ë“œ**: ì¶”ê°€ ì •ë³´ ìë™ ë§í¬

#### 2. í†µí•© ê¸°ëŠ¥

- [ ] **ERP ì—°ë™**: SAP, ë”ì¡´ ë“± ê¸°ì—… ì‹œìŠ¤í…œ ì—°ë™
- [ ] **íšŒê³„ ì‹œìŠ¤í…œ**: ì „í‘œ ìë™ ìƒì„±
- [ ] **ìŠ¹ì¸ ì›Œí¬í”Œë¡œ**: ê²°ì¬ë¼ì¸ ìë™ ì²˜ë¦¬
- [ ] **API Gateway**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

#### 3. ë¶„ì„ ê¸°ëŠ¥

- [ ] **ì§€ì¶œ ë¶„ì„**: íŒ¨í„´ ë¶„ì„ ë° ì¸ì‚¬ì´íŠ¸
- [ ] **ì˜ˆì‚° ê´€ë¦¬**: ì˜ˆì‚° ëŒ€ë¹„ ì§€ì¶œ ëª¨ë‹ˆí„°ë§
- [ ] **ì´ìƒ íƒì§€**: ë¹„ì •ìƒ ì§€ì¶œ ìë™ ê°ì§€
- [ ] **ë³´ê³ ì„œ**: ìë™ ì§€ì¶œ ë³´ê³ ì„œ ìƒì„±

### ì¥ê¸° ê³„íš (6-12ê°œì›”)

#### 1. AI ê³ ë„í™”

- [ ] **ë©€í‹°ëª¨ë‹¬ AI**: ì´ë¯¸ì§€+í…ìŠ¤íŠ¸ ë™ì‹œ ë¶„ì„
- [ ] **íŒŒì¸íŠœë‹**: ê¸°ì—…ë³„ ë§ì¶¤ ëª¨ë¸
- [ ] **ì—£ì§€ AI**: ë¡œì»¬ ì²˜ë¦¬ë¡œ ë³´ì•ˆ ê°•í™”
- [ ] **ìë™ ë³´ì •**: ì˜ëª»ëœ ë¶„ë¥˜ ìë™ ìˆ˜ì •

#### 2. í™•ì¥ì„±

- [ ] **í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ**: Kubernetes ë°°í¬
- [ ] **ê¸€ë¡œë²Œ ì§€ì›**: ë‹¤êµ­ê°€ ì˜ìˆ˜ì¦ ì²˜ë¦¬
- [ ] **ëŒ€ìš©ëŸ‰ ì²˜ë¦¬**: ì¼ 100ë§Œê±´ ì²˜ë¦¬ ì§€ì›
- [ ] **ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼**: ì‹¤ì‹œê°„ ì˜ìˆ˜ì¦ ì²˜ë¦¬

#### 3. ë³´ì•ˆ ë° ê·œì • ì¤€ìˆ˜

- [ ] **ê°œì¸ì •ë³´ë³´í˜¸**: GDPR, ê°œì¸ì •ë³´ë³´í˜¸ë²• ì¤€ìˆ˜
- [ ] **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ì²˜ë¦¬ ê³¼ì • ì¶”ì 
- [ ] **ë°ì´í„° ì•”í˜¸í™”**: ì „ì†¡/ì €ì¥ ë°ì´í„° ì•”í˜¸í™”
- [ ] **ì ‘ê·¼ ì œì–´**: RBAC ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬

---

## ğŸ“ˆ ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸

### ì˜ˆìƒ íš¨ê³¼

#### ì‹œê°„ ì ˆì•½

ìˆ˜ë™ ì…ë ¥ ëŒ€ë¹„ ì²˜ë¦¬ ì‹œê°„ ë‹¨ì¶•:

- **ê¸°ì¡´ ë°©ì‹**: ì˜ìˆ˜ì¦ ë‹¹ ìˆ˜ ë¶„ì˜ ìˆ˜ë™ ì…ë ¥
- **ìë™í™” í›„**: ì˜ìˆ˜ì¦ ë‹¹ ìˆ˜ì‹­ ì´ˆì˜ ê²€í†  ì‹œê°„
- **ì ˆì•½ íš¨ê³¼**: ë°˜ë³µ ì‘ì—… ê°ì†Œ

#### ì •í™•ì„± í–¥ìƒ

- **ì¼ê´€ëœ ë¶„ë¥˜**: ë™ì¼ ë¸Œëœë“œì— ëŒ€í•œ ì¼ê´€ì„±
- **ì˜¤íƒ€ ê°ì†Œ**: ìë™ ì…ë ¥ìœ¼ë¡œ ì˜¤íƒ€ ë°©ì§€
- **íŒ¨í„´ í•™ìŠµ**: ì‚¬ìš©í• ìˆ˜ë¡ í–¥ìƒë˜ëŠ” ì •í™•ë„

---

## ğŸ“ ì§€ì› ë° ì—°ë½ì²˜

### ê¸°ìˆ  ì§€ì›

- **ê°œë°œíŒ€**: dev@company.com
- **ê¸°ìˆ ë¬¸ì˜**: tech-support@company.com
- **ë²„ê·¸ì‹ ê³ **: bug-report@company.com

### ë¬¸ì„œ ë° ë¦¬ì†ŒìŠ¤

- **API ë¬¸ì„œ**: http://localhost:5001/ (Swagger UI)
- **GitHub**: https://github.com/company/receipt-processor
- **ìœ„í‚¤**: https://wiki.company.com/receipt-processor

### ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” **MIT ë¼ì´ì„ ìŠ¤** í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

---

_Â© 2024 Receipt Processor Team. All rights reserved._

_ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2024ë…„ 12ì›” 24ì¼_
